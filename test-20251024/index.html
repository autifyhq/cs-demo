<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>食材在庫一覧</title>
    <style>
        /* ページの基本スタイル */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Hiragino Sans", "Noto Sans CJK JP", "Original Yu Gothic", "Yu Gothic", sans-serif;
            margin: 2em;
            background-color: #f8f9fa;
            color: #333;
        }

        h1 {
            font-size: 1.5em;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 0.5em;
            margin-bottom: 1em;
        }

        /* 上部フィルターのスタイル */
        .top-filters {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            align-items: center;
        }

        .top-filters label {
            font-weight: bold;
        }

        .top-filters select {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        /* テーブル全体のスタイル */
        table {
            width: 100%;
            border-collapse: collapse;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* テーブルのヘッダーとセルのスタイル */
        th, td {
            border: 1px solid #dee2e6;
            padding: 12px 15px;
            text-align: left;
            white-space: nowrap;
        }

        /* テーブルヘッダーのスタイル */
        thead {
            background-color: #f2f2f2;
        }
        
        /* 並び替え可能な列のヘッダースタイル */
        th.sortable {
            cursor: pointer;
            user-select: none;
            position: relative;
        }
        
        /* ソートアイコンの表示 */
        th.sortable::after {
            content: ' \25B2\25BC'; /* ▲▼ */
            color: #ccc;
            font-size: 0.8em;
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
        }

        th.sortable.asc::after {
            content: ' \25B2'; /* ▲ */
            color: #333;
        }

        th.sortable.desc::after {
            content: ' \25BC'; /* ▼ */
            color: #333;
        }
        
        /* 在庫状況のラベルスタイル */
        .status {
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: bold;
            text-align: center;
            display: inline-block;
            min-width: 60px;
            font-size: 0.9em;
        }

        .status-instock { background-color: #28a745; } /* 緑 */
        .status-outofstock { background-color: #dc3545; } /* 赤 */

        /* テーブルボディの行スタイル */
        tbody tr:nth-child(even) { background-color: #f9f9f9; }
        tbody tr:hover { background-color: #e9ecef; }
        
        /* フィルター入力欄のスタイル */
        .filter-input {
            width: 95%;
            padding: 6px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
    </style>
</head>
<body>

    <h1>食材在庫一覧</h1>

    <div class="top-filters">
        <label for="store">店舗名</label>
        <select id="store">
            <option>新宿西口店</option>
            <option>渋谷中央店</option>
            <option>池袋東口店</option>
        </select>
        <label for="check-date">確認日</label>
        <select id="check-date">
            <option>30日</option>
        </select>
    </div>

    <table>
        <thead>
            <tr>
                <th class="sortable" data-column-index="0">#</th>
                <th class="sortable" data-column-index="1">食材管理番号</th>
                <th class="sortable" data-column-index="2">食材名</th>
                <th class="sortable" data-column-index="3">在庫状況</th>
                <th class="sortable" data-column-index="4">最終更新日時</th>
                <th class="sortable" data-column-index="5">カテゴリ</th>
                <th class="sortable" data-column-index="6">担当者</th>
            </tr>
            <tr class="filter-row">
                <td></td>
                <td><input type="text" class="filter-input" data-column-index="1" placeholder="検索..."></td>
                <td><input type="text" class="filter-input" data-column-index="2" placeholder="検索..."></td>
                <td>
                    <select class="filter-input" data-column-index="3">
                        <option value="">全て</option>
                        <option value="在庫あり">在庫あり</option>
                        <option value="在庫切れ">在庫切れ</option>
                    </select>
                </td>
                <td></td> <td><input type="text" class="filter-input" data-column-index="5" placeholder="検索..."></td>
                <td><input type="text" class="filter-input" data-column-index="6" placeholder="検索..."></td>
            </tr>
        </thead>
        <tbody id="data-table">
            <tr>
                <td>1</td>
                <td>FRT-001</td>
                <td>国産りんご</td>
                <td><span class="status status-instock">在庫あり</span></td>
                <td>2025-10-24 09:30:15</td>
                <td>果物</td>
                <td>田中</td>
            </tr>
            <tr>
                <td>2</td>
                <td>VEG-001</td>
                <td>北海道産じゃがいも</td>
                <td><span class="status status-instock">在庫あり</span></td>
                <td>2025-10-23 15:10:45</td>
                <td>野菜</td>
                <td>鈴木</td>
            </tr>
            <tr>
                <td>3</td>
                <td>MET-001</td>
                <td>国産豚バラ肉</td>
                <td><span class="status status-outofstock">在庫切れ</span></td>
                <td>2025-10-23 11:05:30</td>
                <td>精肉</td>
                <td>佐藤</td>
            </tr>
            <tr>
                <td>4</td>
                <td>SEA-001</td>
                <td>ノルウェー産サーモン</td>
                <td><span class="status status-instock">在庫あり</span></td>
                <td>2025-10-22 18:00:00</td>
                <td>鮮魚</td>
                <td>高橋</td>
            </tr>
            <tr>
                <td>5</td>
                <td>DRY-001</td>
                <td>イタリア産パスタ</td>
                <td><span class="status status-instock">在庫あり</span></td>
                <td>2025-10-22 14:20:10</td>
                <td>乾物</td>
                <td>渡辺</td>
            </tr>
            <tr>
                <td>6</td>
                <td>VEG-002</td>
                <td>千葉県産にんじん</td>
                <td><span class="status status-outofstock">在庫切れ</span></td>
                <td>2025-10-21 10:00:00</td>
                <td>野菜</td>
                <td>鈴木</td>
            </tr>
            <tr>
                <td>7</td>
                <td>FRT-002</td>
                <td>フィリピン産バナナ</td>
                <td><span class="status status-instock">在庫あり</span></td>
                <td>2025-10-20 16:45:55</td>
                <td>果物</td>
                <td>田中</td>
            </tr>
            <tr>
                <td>8</td>
                <td>DAI-001</td>
                <td>北海道産牛乳</td>
                <td><span class="status status-instock">在庫あり</span></td>
                <td>2025-10-19 08:55:00</td>
                <td>乳製品</td>
                <td>伊藤</td>
            </tr>
            <tr>
                <td>9</td>
                <td>MET-002</td>
                <td>オーストラリア産牛肉</td>
                <td><span class="status status-outofstock">在庫切れ</span></td>
                <td>2025-10-18 12:00:10</td>
                <td>精肉</td>
                <td>佐藤</td>
            </tr>
            <tr>
                <td>10</td>
                <td>SEA-002</td>
                <td>国産さんま</td>
                <td><span class="status status-instock">在庫あり</span></td>
                <td>2025-10-17 17:30:25</td>
                <td>鮮魚</td>
                <td>高橋</td>
            </tr>
        </tbody>
    </table>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- 並び替え機能 ---
    const getCellValue = (tr, idx) => tr.children[idx].innerText || tr.children[idx].textContent;

    const comparer = (idx, asc) => (a, b) => {
        let v1 = getCellValue(asc ? a : b, idx);
        let v2 = getCellValue(asc ? b : a, idx);

        if (v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2)) {
            return parseFloat(v1) - parseFloat(v2);
        }
        
        return v1.toString().localeCompare(v2);
    };

    document.querySelectorAll('th.sortable').forEach(th => {
        // ▼▼▼ ここを修正しました ▼▼▼
        th.addEventListener('click', () => {
            const table = th.closest('table');
            const tbody = table.querySelector('tbody');
            const columnIndex = parseInt(th.dataset.columnIndex);
            
            table.querySelectorAll('th.sortable').forEach(h => {
                if(h !== th) h.classList.remove('asc', 'desc');
            });
            
            const currentIsAsc = th.classList.contains('asc');
            th.classList.toggle('asc', !currentIsAsc);
            th.classList.toggle('desc', currentIsAsc);
            
            Array.from(tbody.querySelectorAll('tr'))
                .sort(comparer(columnIndex, !currentIsAsc))
                .forEach(tr => tbody.appendChild(tr));
        });
        // ▲▲▲ ここを修正しました ▲▲▲
    });

    // --- フィルター機能 ---
    const filterInputs = document.querySelectorAll('.filter-row .filter-input');
    const tableBody = document.getElementById('data-table');
    const tableRows = tableBody.getElementsByTagName('tr');

    const applyFilters = () => {
        const filterValues = Array.from(filterInputs).map(input => ({
            value: input.value,
            index: parseInt(input.dataset.columnIndex)
        }));

        for (const row of tableRows) {
            let isVisible = true;
            for (const filter of filterValues) {
                if (filter.value === '') continue;

                const cellText = row.children[filter.index].textContent;
                if (!cellText.includes(filter.value)) {
                    isVisible = false;
                    break;
                }
            }
            row.style.display = isVisible ? '' : 'none';
        }
    };

    filterInputs.forEach(input => {
        input.addEventListener('keyup', applyFilters);
        input.addEventListener('change', applyFilters);
    });
});
</script>

</body>
</html>